<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Starry Background</title>
    <style>
        canvas {
            display: block;
            margin: 0 auto;
            background-color: black; /* Background for the stars */
        }
    </style>
</head>
<body>
    <canvas id="backgroundCanvas" width="1200" height="800"></canvas>
    <canvas id="flickerCanvas" width="1200" height="800" 
            style="position: absolute; top: 0; left: 0;"></canvas>
    
    <script>
      const bgCanvas = document.getElementById('backgroundCanvas');
      const bgCtx = bgCanvas.getContext('2d');
    
      const flickerCanvas = document.getElementById('flickerCanvas');
      const flickerCtx = flickerCanvas.getContext('2d');
    
      // 1) Draw static background
      function drawStaticStars() {
        const STAR_COUNT = 1500;
        for (let i = 0; i < STAR_COUNT; i++) {
          const x = Math.random() * bgCanvas.width;
          const y = Math.random() * bgCanvas.height;
          const radius = Math.random() * 1.2 + 0.1;
          bgCtx.beginPath();
          bgCtx.arc(x, y, radius, 0, 2 * Math.PI);
          bgCtx.fillStyle = 'white';
          bgCtx.fill();
        }
      }
    
      // 2) Flicker a smaller set of stars
      const FLICKER_COUNT = 50;
      const flickerStars = [];
    
      function createFlickerStars() {
        for (let i = 0; i < FLICKER_COUNT; i++) {
          flickerStars.push({
            x: Math.random() * flickerCanvas.width,
            y: Math.random() * flickerCanvas.height,
            radius: Math.random() * (1.5 - 0.5) + 0.5,
            opacity: Math.random()
          });
        }
      }
    
      function drawFlickerStars() {
        flickerCtx.clearRect(0, 0, flickerCanvas.width, flickerCanvas.height);
        const FLICKER_INTENSITY = 0.03;
    
        flickerStars.forEach(star => {
          star.opacity += (Math.random() * FLICKER_INTENSITY * 2 - FLICKER_INTENSITY);
          if (star.opacity > 1) star.opacity = 1;
          if (star.opacity < 0) star.opacity = 0;
    
          flickerCtx.beginPath();
          flickerCtx.arc(star.x, star.y, star.radius, 0, 2 * Math.PI);
          flickerCtx.fillStyle = `rgba(255, 255, 255, ${star.opacity})`;
          flickerCtx.fill();
        });
      }
    
      function animate() {
        // Lower fps, say 20
        setTimeout(() => {
          requestAnimationFrame(animate);
          drawFlickerStars();
        }, 1000 / 20);
      }
    
      drawStaticStars();
      createFlickerStars();
      animate();
    </script>
</body>
</html>